<div class="container border border-primary pt-2">
  <%= form_with scope: :load_profile_csv, url: district_systems_path, multipart: true do |form| %>
    <h4 class="pt-3 pb-3">Upload the district heating and cooling demand profile CSV.</h4>
    <div class="row pl-5">
      <!-- For model oriented scenarios-->
      <%#= form.file_field :loadprofile %>
      <!-- For model-free scenarios-->
      <%= file_field_tag 'load_profile_csv', :required => true %>
      <p><%= form.submit 'Upload', onclick: 'uploadLoadsProfile();' %></p>
    </div>
  <% end %>

  <div id="loadshape_viz_div">
    <div class="row">
      <div class="col-md-12">
        <div id="ts_viz_container_1" style="width:100%; height:auto;"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div id="ts_viz_container_2" style="width:100%; height:auto;"></div>
      </div>
    </div>

    <br>
    <div class="row" style="display: none">
      <div class="col-md-12">
        <div id="dummy_bar_viz_container" style="width:100%; height:auto;"></div>
      </div>
    </div>
    <br>
    <div class="row" style="display: none">
      <div class="col-md-6">
        <div id="dummy_pie_viz_container_1" style="width:100%; height:auto;"></div>
      </div>
      <div class="col-md-6">
        <div id="dummy_pie_viz_container_2" style="width:100%; height:auto;"></div>
      </div>
    </div>

    <% if @hash_key_stats.nil? %>
    <% else %>
      <div class="row" id="key_stats_table" style="display: block">
        <div class="col-md-12">
          <h4>Key statistics</h4>
          <table class="table table-bordered table-hover text-center">
            <thead>
            <tr>
              <th class="text-center" style="width: 35%"></th>
              <th class="text-center" style="width: 15%">Peak</th>
              <th class="text-center" style="width: 20%">Peak Time</th>
              <th class="text-center" style="width: 15%">Intensity</th>
              <th class="text-center" style="width: 15%">Diversity <sup>[1]</sup></th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td class="text-right"><b>Heating Demand</b></td>
              <td id="peak_heating_demand"><%= @hash_key_stats['peak heating demand'] %></td>
              <td id="peak_heating_demand_time"><%= @hash_key_stats['peak heating demand time'] %></td>
              <td id="peak_heating_demand_intensity"><%= @hash_key_stats['heating demand intensity'] %></td>
              <td id="annual_heating_demand_diversity"><%= @hash_key_stats['heating demand diversity'] %></td>
            </tr>
            <tr>
              <td class="text-right"><b>Cooling Demand</b></td>
              <td id="peak_cooling_demand"><%= @hash_key_stats['peak cooling demand'] %></td>
              <td id="peak_cooling_demand_time"><%= @hash_key_stats['peak cooling demand time'] %></td>
              <td id="peak_cooling_demand_intensity"><%= @hash_key_stats['cooling demand intensity'] %></td>
              <td id="annual_cooling_demand_diversity"><%= @hash_key_stats['cooling demand diversity'] %></td>
            </tr>
            <tr>
              <td class="text-right"><b>Simultaneous Heating & Cooling Demand</b></td>
              <td id="peak_heating_cooling_demand"><%= @hash_key_stats['peak sim heating and cooling demand'] %></td>
              <td id="peak_heating_cooling_demand_time"><%= @hash_key_stats['peak sim heating and cooling demand time'] %></td>
              <td id="peak_heating_cooling_demand_intensity"><%= @hash_key_stats['sim heating and cooling demand intensity'] %></td>
              <td id="annual_heating_cooling_demand_diversity"><%= @hash_key_stats['sim heating and cooling demand diversity'] %></td>
            </tr>
            <tr>
              <td class="text-right"><b>Electricity Consumption</b></td>
              <td id="peak_electricity_consumption"><%= @hash_key_stats['peak electricity consumption'] %></td>
              <td id="peak_electricity_consumption_time"><%= @hash_key_stats['peak electricity consumption time'] %></td>
              <td id="annual_electricity_consumption_intensity"><%= @hash_key_stats['ele consumption intensity'] %></td>
              <td id="annual_electricity_consumption_diversity"><%= @hash_key_stats['ele consumption diversity'] %></td>
            </tr>
            <tr>
              <td class="text-right"><b>Natural Consumption</b></td>
              <td id="peak_ng_consumption"><%= @hash_key_stats['peak natural gas consumption'] %></td>
              <td id="peak_ng_consumption_time"><%= @hash_key_stats['peak natural gas consumption time'] %></td>
              <td id="annual_ng_consumption_intensity"><%= @hash_key_stats['gas consumption intensity'] %></td>
              <td id="annual_ng_consumption_diversity"><%= @hash_key_stats['gas consumption diversity'] %></td>
            </tr>
            <tr>
              <td class="text-right"><b>Annual Heat Recovery Potential</b></td>
              <td id="annual_heat_recovery_potential" colspan="4"></td>
            </tr>
          </table>
          <p><a href="https://en.wikipedia.org/wiki/Diversity_index#Simpson_index">[1] Simpson's diversity index</a></p>
        </div>
      </div>
    <% end %>


  </div>
</div>
<br><br>
